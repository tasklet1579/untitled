✔️웹 성능 예산

예산을 세우는 이유는 가용 자원의 한도를 정해놓고, 초과하여 쓰지 않기 위함이다. 즉, 최소한의 성능 마지노선에 대한 컨벤션을 맞추는 작업이라고 할 수 있다.
이 작업에서 성능 지표를 사용하는데, 이 때 반드시 지표가 한 개일 필요는 없다. 상황에 맞게 여러 지표를 혼합하여 측정하면 된다.

- 정량 기반 지표
  - 이미지, 스크립트, 폰트 등 웹 페이지 제작에 필요한 요소들의 한계값을 설정하는 것으로 고려해야 하는 대표 항목은 다음과 같다.
    - 이미지 파일의 최대 크기
    - 자바스크립트 파일의 크기의 합
    - 서드 파티 스크립트 개수의 합
- 시간 기반 지표
  - 브라우저에서 발생하는 다양한 웹 이벤트 값을 측정하여 성능에 대한 목표치를 설정하는 것으로 대표 항목은 다음과 같다.
    - First Contentful Paint
      - 컨텐츠 렌더링이 시작될 때까지 걸리는 시간
    - Largest Contentful Paint
      - 가장 큰 이미지 또는 비디오가 렌더링을 시작할 때까지 걸리는 시간
    - First input delay
      - 사용자가 상호 작용을 한 후 웹 브라우저가 그 상호 작용을 처리할 때까지 걸리는 시간
    - Time to Interactive
      - 모든 리소스가 로드되고 사용자 입력에 신속하게 안정적으로 응답할 수 있는 시점까지의 시간
    - Total blocking time
      - 메인 스레드가 입력 응답을 막을 만큼 오래 차단되었을 때 FCP와 TTI 사이의 총 시간
    - Cumulative Layout Shift
      - 사용자가 예상치 못한 레이아웃 이동을 경험하는 빈도를 수량화한 것
- 규칙 기반 지표
  - 웹 성능 지표를 측정하여 사이트의 점수를 메기는 도구를 활용해 성능을 비교 분석, 개선할 수 있고 대표 도구는 다음과 같다.
  - LightHouse
  - [WebPageTest](https://www.webpagetest.org/)

***성능 측정 결과***

| |First Byte|Start Render|FCP|LCP|CLS|TBT|Total Bytes|
|---|---|---|---|---|---|---|---|
|넥스트스텝|1.582s|9.200s|9.127s|9.337s|0.058s|0.004s|2,462KB|
|네이버지도|1.287s|3.600s|3.461s|12.298s|0.031s|0.487s|989KB|

***결론***

웹 서비스는 변경이 잦기 때문에 언제든 웹 성능 요소가 변경될 수 있고 객관적인 성능을 측정할 수 있는 도구를 활용하여 핵심 지표를 관리해야 한다.

- FCP : 2.5초 이하 양호, 4.0초 이상 나쁨
- FID : 0.1초 이하 양호, 0.3초 이상 나쁨
- TTI : 평균적으로 모바일 하드웨어에서 5초 미만 권고
- CLS : 0.1점 이하 양호, 0.25점 이상 나쁨

✔️

✔️

